{% extends "base.html" %}

{% block title %}My Scores - Golf Score Tracker{% endblock %}

{% block content %}
<div class="scores-page">
    <div class="page-header">
        <h1>My Score History</h1>
        <a href="{{ url_for('new_round') }}" class="btn btn-primary">+ Enter New Round</a>
    </div>

    {% if rounds %}
        <table class="scores-table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Course</th>
                    <th>Par</th>
                    <th>Score</th>
                    <th>+/-</th>
                    <th>Differential</th>
                    <th>Notes</th>
                </tr>
            </thead>
            <tbody>
                {% for round in rounds %}
                <tr>
                    <td>{{ round.date_played.strftime('%Y-%m-%d') }}</td>
                    <td>{{ round.course.name }}</td>
                    <td>{{ round.course.par }}</td>
                    <td class="score-cell">{{ round.total_score }}</td>
                    <td class="diff-cell">
                        {% set diff = round.total_score - round.course.par %}
                        {% if diff == 0 %}
                            <span class="score-even">E</span>
                        {% elif diff > 0 %}
                            <span class="score-over">+{{ diff }}</span>
                        {% else %}
                            <span class="score-under">{{ diff }}</span>
                        {% endif %}
                    </td>
                    <td>{% if round.differential %}{{ round.differential|round(1) }}{% else %}N/A{% endif %}</td>
                    <td class="notes-cell">{{ round.notes[:50] if round.notes else '-' }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <div class="score-stats">
            <h3>Statistics</h3>
            <p>Total Rounds: {{ rounds|length }}</p>
        </div>
    {% else %}
        <div class="no-data">
            <p>No rounds recorded yet.</p>
            <a href="{{ url_for('new_round') }}" class="btn btn-primary">Enter your first round</a>
        </div>
    {% endif %}
</div>
{% endblock %}
